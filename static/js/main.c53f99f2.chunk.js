(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{198:function(e,t,n){},199:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n(0),o=n.n(i),r=n(9),a=n.n(r),u=(n(198),n(199),n(31)),d=n(87),l=n(88),s=n(95),j=n(94),b=n(13),h=n(29),p=function(e){return Object(c.jsxs)("div",{children:[e.isAuth?e.userId:Object(c.jsx)(h.b,{to:"/login",children:"Login"}),Object(c.jsx)(h.b,{to:"/registrate",children:"registrate"}),Object(c.jsx)(h.b,{to:"/profile",children:"profile"})]})},f=function(e){Object(s.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(c.jsx)(p,Object(u.a)({},this.props))}}]),n}(o.a.Component),m=Object(b.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}}),{})(f),O=n(402),x=n(403),v=n(177).create({baseURL:"https://to-do-task-server.herokuapp.com/"}),D=function(e,t){return v.post("sessions",{email:e,password:t}).then((function(e){return e}))},E=function(e,t,n){return v.post("registrations",{email:e,password:t,password_confirmation:n}).then((function(e){return e}))},_=function(e){return v.get("todo/".concat(e)).then((function(e){return e}))},g=function(e,t,n,c,i,o,r){return v.patch("todo/".concat(e),{contact_id:t,title:n,description:c,priority:i,done:o,due_date:r}).then((function(e){return e}))},T=function(e,t){return v.post("todo",{contact_id:e,title:t}).then((function(e){return e}))},P=function(e){return v.delete("todo/".concat(e)).then((function(e){return e}))},y="SET_CONTACT_DATA",w={userId:1,isAuth:!1,authentication_token:null},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(u.a)(Object(u.a)({},e),{},{userId:t.userId,isAuth:!0});default:return e}},k=n(399),A=n(185),I=n(401),S=function(e){if(!e)return"This field cant be empty"},N=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},L=function(e){return e&&isNaN(Number(e))?"Must be a number":void 0},R=N(100),W=function(e){var t=e.label,n=e.input,i=e.meta,o=i.touched,r=i.invalid,a=i.error,d=Object(A.a)(e,["label","input","meta"]);return Object(c.jsx)(I.a,Object(u.a)(Object(u.a)({label:t,placeholder:t,error:o&&r,helperText:o&&a},n),d))},M=Object(O.a)({form:"post"})((function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(c.jsx)(x.a,{validate:[S,R],name:"newPost",component:W}),Object(c.jsx)("button",{children:Object(c.jsx)(k.a,{children:"Add new Work"})})]})})})),B=function(e){return Object(c.jsx)(M,{onSubmit:function(t){e.addPost(e.userId,t.newPost)}})},F=Object(O.a)({form:"login"})((function(e){var t=e.handleSubmit;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"login",name:"login",component:W})}),Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"Password",name:"password",component:W})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:Object(c.jsx)(k.a,{placeholder:"login",children:"Login"})})})]})})),Y=Object(b.b)((function(e){return{}}),{setLogIn:function(e,t){return function(n){return D(e,t).then((function(e){if(201===e.status){var t=e.data.id;n(function(e){return{type:y,userId:e}}(t))}}))}}})((function(e){return Object(c.jsx)(F,{onSubmit:function(t){e.setLogIn(t.login,t.password)}})})),H=n(71),G=Object(O.a)({form:"registration"})((function(e){var t=e.handleSubmit;return Object(c.jsxs)("form",{onSubmit:t,children:[Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"email",name:"email",component:W})}),Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"Password",name:"password",component:W})}),Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"Password_confirmation",name:"password_confirmation",component:W})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:Object(c.jsx)(k.a,{placeholder:"registration",children:"Registration"})})})]})})),K=Object(b.b)((function(e){return{}}),{setRegistration:function(e,t,n){return function(c){return E(e,t,n).then((function(e){e.status}))}}})((function(e){return Object(c.jsx)(G,{onSubmit:function(t){e.setRegistration(t.email,t.password,t.password_confirmation)}})})),U=n(127),J="ADD_WORK",z="SET_TODO_EDIT_POINT",Z="SET_TODOLIST",q="SET_EDIT_ELEMENT",Q="DELETE_EDIT_ELEMENT",V="CHANGE_BATCH_DELETE",X="CHANGE_BATCH_DELETE_ALL",$="SORT_ALL",ee={changeBatchDeleteAll:!1,editedElement:{id:0},newWork:"",uncomplete:[],complete:[]},te=function(e){return{type:q,element:e}},ne=function(e){return{type:Q,id:e}},ce=function(e){return{type:V,id:e}},ie=function(e){return function(t){return g(e.id,e.contact_id,e.title,e.description,e.priority,e.done,e.due_date).then((function(e){if(201===e.status){var n=e.data;t(function(e){return{type:z,data:e}}(n))}}))}},oe=function(e){return function(t){return P(e).then((function(n){200===n.status&&t(ne(e))}))}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=Object(u.a)(Object(u.a)({},e),{},{uncomplete:Object(U.a)(e.uncomplete),complete:Object(U.a)(e.complete)});switch(t.type){case $:return n.complete.sort((function(e,t){return e.title>t.title?1:t.title>e.title?-1:0})),n.uncomplete.sort((function(e,t){return e.title>t.title?1:t.title>e.title?-1:0})),n;case X:return n.changeBatchDeleteAll=!n.changeBatchDeleteAll,n.complete.map((function(e){return e.batchDelete=n.changeBatchDeleteAll,e})),n.uncomplete.map((function(e){return e.batchDelete=n.changeBatchDeleteAll,e})),n;case V:return n.complete.map((function(e){return e.id===t.id&&(e.batchDelete=!e.batchDelete),e})),n.uncomplete.map((function(e){return e.id===t.id&&(e.batchDelete=!e.batchDelete),e})),n;case J:return t.newToDoPoint.batchDelete=!1,n.uncomplete.push(t.newToDoPoint),n;case q:return n.editedElement=t.element,n;case Q:return n.complete=e.complete.filter((function(e){return e.id!==t.id})),n.uncomplete=e.uncomplete.filter((function(e){return e.id!==t.id})),n;case z:return n.complete=e.complete.filter((function(e){return e.id!==t.data.id})),n.uncomplete=e.uncomplete.filter((function(e){return e.id!==t.data.id})),t.data.done?n.complete.push(t.data):n.uncomplete.push(t.data),n;case Z:return t.data.map((function(e){return e.batchDelete=!1})),n.complete=t.data.filter((function(e){return!0===e.done})),n.uncomplete=t.data.filter((function(e){return!0!==e.done})),n;default:return e}},ae=Object(b.b)((function(e){return{userId:e.auth.userId}}),(function(e){return{addPost:function(t,n){var c,i;e((c=t,i=n,function(e){return T(c,i).then((function(t){if(201===t.status){var n=t.data;e({type:"ADD_WORK",newToDoPoint:n})}}))}))}}}))(B),ue=n(404),de=function(e){return Object(c.jsx)("div",{children:e.todo.complete.map((function(t){return Object(c.jsx)("div",{children:Object(c.jsxs)("span",{children:[Object(c.jsx)("div",{onClick:function(){e.EditedElement(t)},children:Object(c.jsx)(h.b,{to:"/edit",children:Object(c.jsx)(I.a,{id:"outlined-basic",value:t.title,variant:"outlined"})})}),Object(c.jsx)(k.a,{variant:"contained",color:"secondary",onClick:function(){e.EditToDoPoint(t,t.done=!1)},children:"Uncomplete"}),Object(c.jsx)(k.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteToDoPoint(t.id)},children:"Delete"}),Object(c.jsx)(ue.a,{checked:t.batchDelete,onChange:function(){e.batchDelete(t.id)},inputProps:{"aria-label":"primary checkbox"}})]})},t.id)}))})},le=Object(b.b)((function(e){return{todo:e.toDoPage}}),(function(e){return{EditToDoPoint:function(t){e(ie(t))},EditedElement:function(t){e(te(t))},deleteToDoPoint:function(t){e(oe(t))},batchDelete:function(t){e(ce(t))}}}))(de),se=function(e){return Object(c.jsx)("div",{children:e.todo.uncomplete.map((function(t){return Object(c.jsx)("div",{children:Object(c.jsx)("span",{children:Object(c.jsxs)("div",{children:[Object(c.jsx)(h.b,{to:"/edit",onClick:function(){e.EditedElement(t)},children:Object(c.jsx)(I.a,{id:"outlined-basic",value:t.title,variant:"outlined"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){e.EditToDoPoint(t,t.done=!0)},children:"complete"}),Object(c.jsx)(k.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteToDoPoint(t.id)},children:"Delete"}),Object(c.jsx)(ue.a,{checked:t.batchDelete,onChange:function(){e.batchDelete(t.id)},inputProps:{"aria-label":"primary checkbox"}})]})]})})},t.id)}))})},je=Object(b.b)((function(e){return{todo:e.toDoPage}}),(function(e){return{EditToDoPoint:function(t){e(ie(t))},EditedElement:function(t){e(te(t))},deleteToDoPoint:function(t){e(oe(t))},batchDelete:function(t){e(ce(t))}}}))(se),be=n(61),he=n.n(be),pe=Object(b.b)((function(e){return{toDoPoints:e.toDoPage}}),(function(e){return{batchDeleteAll:function(){e({type:X})},batchDelete:function(t){e(function(e){return function(t){return e.forEach((function(e){P(e).then((function(n){200===n.status&&t(ne(e))}))}))}}(t))},sort:function(){e({type:$})}}}))((function(e){var t=e.toDoPoints.complete.filter((function(e){return 1==e.batchDelete})).concat(e.toDoPoints.uncomplete.filter((function(e){return 1==e.batchDelete}))).map((function(e){return e.id}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(k.a,{variant:"contained",color:"secondary",onClick:function(){e.batchDeleteAll()},children:"Select All"}),Object(c.jsx)(k.a,{variant:"contained",color:"secondary",onClick:function(){e.batchDelete(t)},children:"Delete multiple"}),Object(c.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){e.sort()},children:"Sort"})]})})),fe=function(e){Object(s.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getToDoListThunk(this.props.userId)}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:he.a.contentWrapper,children:[Object(c.jsx)("div",{className:he.a.input,children:Object(c.jsx)(ae,{})}),Object(c.jsx)("div",{className:he.a.batchDelete,children:Object(c.jsx)(pe,{})}),Object(c.jsx)("div",{className:he.a.complete,children:Object(c.jsx)(le,{})}),Object(c.jsx)("div",{className:he.a.uncomplete,children:Object(c.jsx)(je,{})})]})}}]),n}(o.a.Component),me=Object(b.b)((function(e){return{userId:e.auth.userId}}),{getToDoListThunk:function(e){return function(t){return _(e).then((function(e){if(201===e.status){var n=e.data;t(function(e){return{type:Z,data:e}}(n))}}))}}})(fe),Oe=n(400),xe=Object(b.b)((function(e){return{editedElement:e.toDoPage.editedElement}}))((function(e){var t;return t=null!==e.editedElement.due_date&&void 0!==e.editedElement.due_date?e.editedElement.due_date.substring(0,10):"\u0412\u0440\u0435\u043c\u044f \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsxs)(Oe.a,{variant:"subtitle1",children:["Old title: ",e.editedElement.title]})}),Object(c.jsx)("div",{children:Object(c.jsxs)(Oe.a,{variant:"subtitle1",children:["Old description: ",e.editedElement.description]})}),Object(c.jsx)("div",{children:Object(c.jsxs)(Oe.a,{variant:"subtitle1",children:["Old priority: ",e.editedElement.priority]})}),Object(c.jsx)("div",{children:Object(c.jsxs)(Oe.a,{variant:"subtitle1",children:["Complete: ",e.editedElement.done]})}),Object(c.jsx)("div",{children:Object(c.jsxs)(Oe.a,{variant:"subtitle1",children:["Due_date: ",t]})})]})})),ve=n(66),De=n(182),Ee=n.n(De),_e=n(121),ge=n.n(_e),Te=n(183),Pe=n.n(Te);n(365);Pe()(ge.a);var ye,we=function(e){var t=e.input,n=t.onChange,i=t.value,o=e.showTime;return Object(c.jsx)(Ee.a,{onChange:n,format:"DD MMM YYYY",time:o,value:i?new Date(i):null})},Ce=N(100),ke=(ye=Date(),function(e){return e&&e<ye?"Must be at least ".concat(ye):void 0}),Ae=Object(O.a)({form:"edit"})((function(e,t){var n,i=e.handleSubmit;return Object(c.jsxs)("form",{onSubmit:i,children:[Object(c.jsx)("div",{children:Object(c.jsx)(x.a,(n={validate:[S,Ce],name:"newPost",placeholder:"title"},Object(ve.a)(n,"name","title"),Object(ve.a)(n,"component",W),n))}),Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{placeholder:"description",name:"description",component:W})}),Object(c.jsxs)("div",{children:[Object(c.jsx)(x.a,{component:"input",name:"done",type:"checkbox"})," Done?"]}),Object(c.jsx)("div",{children:Object(c.jsx)(x.a,{validate:[L],placeholder:"Priority(nember)",name:"priority",component:W})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"Due date"}),Object(c.jsx)(x.a,{validate:[ke],name:"due_date",showTime:!1,component:we})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:Object(c.jsx)(k.a,{placeholder:"save",children:"Save"})})})]})})),Ie=Object(b.b)((function(e){return{editElement:e.toDoPage.editedElement,contact_id:e.auth.userId}}),{EditToDoPointThunk:ie})((function(e){return Object(c.jsx)(Ae,{onSubmit:function(t){e.EditToDoPointThunk(t,t.contact_id=e.contact_id,t.id=e.editElement.id)}})})),Se=n(97),Ne=n.n(Se),Le=function(e){return Object(c.jsxs)("div",{className:Ne.a.contentWrapper,children:[Object(c.jsx)(Ie,{className:Ne.a.EditToDoReduxFormContainer}),Object(c.jsx)(xe,{className:Ne.a.ExistElementContainer})]})};var Re=function(e){return Object(c.jsx)(h.a,{children:Object(c.jsxs)("div",{className:"app-wrapper",children:[Object(c.jsx)(m,{className:"header"}),Object(c.jsxs)("div",{className:"app-wrapper-content",children:[Object(c.jsx)(H.a,{path:"/profile",render:function(){return Object(c.jsx)(me,{})}}),Object(c.jsx)(H.a,{path:"/login",render:function(){return Object(c.jsx)(Y,{})}}),Object(c.jsx)(H.a,{path:"/registrate",render:function(){return Object(c.jsx)(K,{})}}),Object(c.jsx)(H.a,{path:"/edit",render:function(){return Object(c.jsx)(Le,{})}})]})]})})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,407)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),o(e),r(e)}))},Me=n(18),Be=n(184),Fe=n(405),Ye=Object(Me.c)({toDoPage:re,form:Fe.a,auth:C}),He=Object(Me.d)(Ye,Object(Me.a)(Be.a));window.store=He;var Ge=He;a.a.render(Object(c.jsx)(b.a,{store:Ge,children:Object(c.jsx)(Re,{})}),document.getElementById("root")),We()},61:function(e,t,n){e.exports={contentWrapper:"mainpage_contentWrapper__2nnWs",input:"mainpage_input__Mr5Et",complete:"mainpage_complete__RPaZx",uncomplete:"mainpage_uncomplete__1ERY7",batchDelete:"mainpage_batchDelete__1m1Uf"}},97:function(e,t,n){e.exports={contentWrapper:"editToDoPoint_contentWrapper__3oKGF",EditToDoReduxFormContainer:"editToDoPoint_EditToDoReduxFormContainer__1z5n6",ExistElementContainer:"editToDoPoint_ExistElementContainer__14hAa"}}},[[366,1,2]]]);
//# sourceMappingURL=main.c53f99f2.chunk.js.map