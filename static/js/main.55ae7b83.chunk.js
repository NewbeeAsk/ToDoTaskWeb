(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{100:function(e,t,n){e.exports={contentWrapper:"editToDoPoint_contentWrapper__3oKGF",EditToDoReduxFormContainer:"editToDoPoint_EditToDoReduxFormContainer__1z5n6",ExistElementContainer:"editToDoPoint_ExistElementContainer__14hAa"}},128:function(e,t,n){e.exports={field:"todopost_field__NZ13t",button:"todopost_button__J8bCp",loginBlock:"todopost_loginBlock__2KIi8"}},202:function(e,t,n){},203:function(e,t,n){},370:function(e,t,n){"use strict";n.r(t);var i=n(2),c=n(0),o=n.n(c),a=n(9),r=n.n(a),l=(n(202),n(203),n(31)),s=n(90),d=n(91),u=n(98),j=n(97),b=n(13),h=n(29),f=n(403),m=n(72),p=n.n(m),O=n(405),x=function(e){return Object(i.jsxs)("div",{className:p.a.header,children:[Object(i.jsx)("div",{className:p.a.loginBlock,children:e.isAuth?Object(i.jsx)(O.a,{id:"outlined-basic",value:e.userData.first_name+" "+e.userData.last_name,variant:"outlined"}):Object(i.jsx)(h.b,{to:"/login",children:Object(i.jsx)(f.a,{variant:"contained",color:"primary",children:"Login"})})}),Object(i.jsx)("div",{className:p.a.loginBlock,children:Object(i.jsx)(h.b,{to:"/registrate",children:Object(i.jsx)(f.a,{variant:"contained",color:"primary",children:"Registration"})})}),Object(i.jsx)("div",{className:p.a.loginBlock,children:Object(i.jsx)(h.b,{to:"/profile",children:Object(i.jsx)(f.a,{variant:"contained",color:"primary",children:"Main Page"})})})]})},v=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(i.jsx)(x,Object(l.a)({},this.props))}}]),n}(o.a.Component),_=Object(b.b)((function(e){return{isAuth:e.auth.isAuth,userData:e.auth.userData}}),{})(v),D=n(406),g=n(407),E=n(184).create({baseURL:"https://to-do-task-server.herokuapp.com/"}),T=function(e,t){return E.post("sessions",{email:e,password:t}).then((function(e){return e}))},P=function(e,t,n,i,c){return E.post("registrations",{email:e,password:t,password_confirmation:n,first_name:i,last_name:c}).then((function(e){return e}))},N=function(e){return E.get("todo/".concat(e)).then((function(e){return e}))},y=function(e,t,n,i,c,o,a){return E.patch("todo/".concat(e),{contact_id:t,title:n,description:i,priority:c,done:o,due_date:a}).then((function(e){return e}))},k=function(e,t){return E.post("todo",{contact_id:e,title:t}).then((function(e){return e}))},w=function(e){return E.delete("todo/".concat(e)).then((function(e){return e}))},C="SET_CONTACT_DATA",A={userData:{id:0},isAuth:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(l.a)(Object(l.a)({},e),{},{userData:t.data,isAuth:!0});default:return e}},L=n(189),B=function(e){if(!e)return"This field cant be empty"},I=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},R=function(e){return e&&isNaN(Number(e))?"Must be a number":void 0},W=n(128),M=n.n(W),F=I(100),J=function(e){var t=e.label,n=e.input,c=e.meta,o=c.touched,a=c.invalid,r=c.error,s=Object(L.a)(e,["label","input","meta"]);return Object(i.jsx)(O.a,Object(l.a)(Object(l.a)({label:t,placeholder:t,error:o&&a,helperText:o&&r},n),s))},K=Object(D.a)({form:"post"})((function(e){return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(i.jsx)("div",{children:Object(i.jsx)(g.a,{className:M.a.field,validate:[B,F],name:"newPost",component:J})}),Object(i.jsx)("button",{className:M.a.button,children:Object(i.jsx)(f.a,{children:"Add new Work"})})]})})})),Y=function(e){return Object(i.jsx)(K,{onSubmit:function(t){e.addPost(e.userId,t.newPost)}})},G=n(73),H=n.n(G),U=Object(D.a)({form:"login"})((function(e){var t=e.handleSubmit;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{className:H.a.form,onSubmit:t,children:[Object(i.jsx)("div",{className:H.a.fields,children:Object(i.jsx)(g.a,{placeholder:"login",name:"login",component:J})}),Object(i.jsx)("div",{className:H.a.fields,children:Object(i.jsx)(g.a,{placeholder:"Password",name:"password",component:J})}),Object(i.jsx)("div",{className:H.a.fields,children:Object(i.jsx)("button",{children:Object(i.jsx)(f.a,{placeholder:"login",children:"Login"})})})]})})})),Z=Object(b.b)((function(e){return{}}),{setLogIn:function(e,t){return function(n){return T(e,t).then((function(e){if(201===e.status){var t=e.data;n(function(e){return{type:C,data:e}}(t))}}))}}})((function(e){return Object(i.jsx)(U,{onSubmit:function(t){e.setLogIn(t.login,t.password)}})})),z=n(74),Q=n(48),V=n.n(Q),q=Object(D.a)({form:"registration"})((function(e){var t=e.handleSubmit;return Object(i.jsxs)("form",{className:V.a.form,onSubmit:t,children:[Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)(g.a,{placeholder:"first_name",name:"first_name",component:J})}),Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)(g.a,{placeholder:"last_name",name:"last_name",component:J})}),Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)(g.a,{placeholder:"email",name:"email",component:J})}),Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)(g.a,{placeholder:"Password",name:"password",component:J})}),Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)(g.a,{placeholder:"Password_confirmation",name:"password_confirmation",component:J})}),Object(i.jsx)("div",{className:V.a.fields,children:Object(i.jsx)("button",{children:Object(i.jsx)(f.a,{placeholder:"registration",children:"Registration"})})})]})})),X=Object(b.b)((function(e){return{}}),{setRegistration:function(e,t,n,i,c){return function(o){return P(e,t,n,i,c).then((function(e){e.status}))}}})((function(e){return Object(i.jsx)(q,{onSubmit:function(t){e.setRegistration(t.email,t.password,t.password_confirmation,t.first_name,t.last_name)}})})),$=n(131),ee="ADD_WORK",te="SET_TODO_EDIT_POINT",ne="SET_TODOLIST",ie="SET_EDIT_ELEMENT",ce="DELETE_EDIT_ELEMENT",oe="CHANGE_BATCH_DELETE",ae="CHANGE_BATCH_DELETE_ALL",re="SORT_ALL",le={changeBatchDeleteAll:!1,editedElement:{id:0},newWork:"",uncomplete:[],complete:[]},se=function(e){return{type:ie,element:e}},de=function(e){return{type:ce,id:e}},ue=function(e){return{type:oe,id:e}},je=function(e){return function(t){return y(e.id,e.contact_id,e.title,e.description,e.priority,e.done,e.due_date).then((function(e){if(201===e.status){var n=e.data;t(function(e){return{type:te,data:e}}(n))}}))}},be=function(e){return function(t){return w(e).then((function(n){200===n.status&&t(de(e))}))}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=Object(l.a)(Object(l.a)({},e),{},{uncomplete:Object($.a)(e.uncomplete),complete:Object($.a)(e.complete)});switch(t.type){case re:return n.complete.sort((function(e,t){return e.title>t.title?1:t.title>e.title?-1:0})),n.uncomplete.sort((function(e,t){return e.title>t.title?1:t.title>e.title?-1:0})),n;case ae:return n.changeBatchDeleteAll=!n.changeBatchDeleteAll,n.complete.map((function(e){return e.batchDelete=n.changeBatchDeleteAll,e})),n.uncomplete.map((function(e){return e.batchDelete=n.changeBatchDeleteAll,e})),n;case oe:return n.complete.map((function(e){return e.id===t.id&&(e.batchDelete=!e.batchDelete),e})),n.uncomplete.map((function(e){return e.id===t.id&&(e.batchDelete=!e.batchDelete),e})),n;case ee:return t.newToDoPoint.batchDelete=!1,n.uncomplete.push(t.newToDoPoint),n;case ie:return n.editedElement=t.element,n;case ce:return n.complete=e.complete.filter((function(e){return e.id!==t.id})),n.uncomplete=e.uncomplete.filter((function(e){return e.id!==t.id})),n;case te:return n.complete=e.complete.filter((function(e){return e.id!==t.data.id})),n.uncomplete=e.uncomplete.filter((function(e){return e.id!==t.data.id})),t.data.done?n.complete.push(t.data):n.uncomplete.push(t.data),n;case ne:return t.data.map((function(e){return e.batchDelete=!1})),n.complete=t.data.filter((function(e){return!0===e.done})),n.uncomplete=t.data.filter((function(e){return!0!==e.done})),n;default:return e}},fe=Object(b.b)((function(e){return{userId:e.auth.userData.id}}),(function(e){return{addPost:function(t,n){var i,c;e((i=t,c=n,function(e){return k(i,c).then((function(t){if(201===t.status){var n=t.data;e({type:"ADD_WORK",newToDoPoint:n})}}))}))}}}))(Y),me=n(408),pe=function(e){return Object(i.jsx)("div",{children:e.todo.complete.map((function(t){return Object(i.jsx)("div",{children:Object(i.jsxs)("span",{children:[Object(i.jsx)("div",{onClick:function(){e.EditedElement(t)},children:Object(i.jsx)(h.b,{to:"/edit",children:Object(i.jsx)(O.a,{id:"outlined-basic",value:t.title,variant:"outlined"})})}),Object(i.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){e.EditToDoPoint(t,t.done=!1)},children:"Uncomplete"}),Object(i.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteToDoPoint(t.id)},children:"Delete"}),Object(i.jsx)(me.a,{checked:t.batchDelete,onChange:function(){e.batchDelete(t.id)},inputProps:{"aria-label":"primary checkbox"}})]})},t.id)}))})},Oe=Object(b.b)((function(e){return{todo:e.toDoPage}}),(function(e){return{EditToDoPoint:function(t){e(je(t))},EditedElement:function(t){e(se(t))},deleteToDoPoint:function(t){e(be(t))},batchDelete:function(t){e(ue(t))}}}))(pe),xe=function(e){return Object(i.jsx)("div",{children:e.todo.uncomplete.map((function(t){return Object(i.jsx)("div",{children:Object(i.jsx)("span",{children:Object(i.jsxs)("div",{children:[Object(i.jsx)(h.b,{to:"/edit",onClick:function(){e.EditedElement(t)},children:Object(i.jsx)(O.a,{id:"outlined-basic",value:t.title,variant:"outlined"})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){e.EditToDoPoint(t,t.done=!0)},children:"complete"}),Object(i.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){e.deleteToDoPoint(t.id)},children:"Delete"}),Object(i.jsx)(me.a,{checked:t.batchDelete,onChange:function(){e.batchDelete(t.id)},inputProps:{"aria-label":"primary checkbox"}})]})]})})},t.id)}))})},ve=Object(b.b)((function(e){return{todo:e.toDoPage}}),(function(e){return{EditToDoPoint:function(t){e(je(t))},EditedElement:function(t){e(se(t))},deleteToDoPoint:function(t){e(be(t))},batchDelete:function(t){e(ue(t))}}}))(xe),_e=n(63),De=n.n(_e),ge=Object(b.b)((function(e){return{toDoPoints:e.toDoPage}}),(function(e){return{batchDeleteAll:function(){e({type:ae})},batchDelete:function(t){e(function(e){return function(t){return e.forEach((function(e){w(e).then((function(n){200===n.status&&t(de(e))}))}))}}(t))},sort:function(){e({type:re})}}}))((function(e){var t=e.toDoPoints.complete.filter((function(e){return 1==e.batchDelete})).concat(e.toDoPoints.uncomplete.filter((function(e){return 1==e.batchDelete}))).map((function(e){return e.id}));return Object(i.jsxs)("div",{children:[Object(i.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){e.batchDeleteAll()},children:"Select All"}),Object(i.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){e.batchDelete(t)},children:"Delete multiple"}),Object(i.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){e.sort()},children:"Sort"})]})})),Ee=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){0!==this.props.userId&&this.props.getToDoListThunk(this.props.userId)}},{key:"render",value:function(){return Object(i.jsxs)("div",{className:De.a.contentWrapper,children:[Object(i.jsx)("div",{className:De.a.input,children:Object(i.jsx)(fe,{})}),Object(i.jsx)("div",{className:De.a.batchDelete,children:Object(i.jsx)(ge,{})}),Object(i.jsx)("div",{className:De.a.complete,children:Object(i.jsx)(Oe,{})}),Object(i.jsx)("div",{className:De.a.uncomplete,children:Object(i.jsx)(ve,{})})]})}}]),n}(o.a.Component),Te=Object(b.b)((function(e){return{userId:e.auth.userData.id}}),{getToDoListThunk:function(e){return function(t){return N(e).then((function(e){if(201===e.status){var n=e.data;t(function(e){return{type:ne,data:e}}(n))}}))}}})(Ee),Pe=n(404),Ne=Object(b.b)((function(e){return{editedElement:e.toDoPage.editedElement}}))((function(e){var t;return t=null!==e.editedElement.due_date&&void 0!==e.editedElement.due_date?e.editedElement.due_date.substring(0,10):"\u0412\u0440\u0435\u043c\u044f \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsxs)(Pe.a,{variant:"subtitle1",children:["Old title: ",e.editedElement.title]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pe.a,{variant:"subtitle1",children:["Old description: ",e.editedElement.description]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pe.a,{variant:"subtitle1",children:["Old priority: ",e.editedElement.priority]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pe.a,{variant:"subtitle1",children:["Complete: ",e.editedElement.done]})}),Object(i.jsx)("div",{children:Object(i.jsxs)(Pe.a,{variant:"subtitle1",children:["Due_date: ",t]})})]})})),ye=n(67),ke=n(186),we=n.n(ke),Ce=n(124),Ae=n.n(Ce),Se=n(187),Le=n.n(Se);n(369);Le()(Ae.a);var Be,Ie=function(e){var t=e.input,n=t.onChange,c=t.value,o=e.showTime;return Object(i.jsx)(we.a,{onChange:n,format:"DD MMM YYYY",time:o,value:c?new Date(c):null})},Re=I(100),We=(Be=Date(),function(e){return e&&e<Be?"Must be at least ".concat(Be):void 0}),Me=Object(D.a)({form:"edit"})((function(e,t){var n,c=e.handleSubmit;return Object(i.jsxs)("form",{onSubmit:c,children:[Object(i.jsx)("div",{children:Object(i.jsx)(g.a,(n={validate:[B,Re],name:"newPost",placeholder:"title"},Object(ye.a)(n,"name","title"),Object(ye.a)(n,"component",J),n))}),Object(i.jsx)("div",{children:Object(i.jsx)(g.a,{placeholder:"description",name:"description",component:J})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(g.a,{component:"input",name:"done",type:"checkbox"})," Done?"]}),Object(i.jsx)("div",{children:Object(i.jsx)(g.a,{validate:[R],placeholder:"Priority(nember)",name:"priority",component:J})}),Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{children:"Due date"}),Object(i.jsx)(g.a,{validate:[We],name:"due_date",showTime:!1,component:Ie})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{children:Object(i.jsx)(f.a,{placeholder:"save",children:"Save"})})})]})})),Fe=Object(b.b)((function(e){return{editElement:e.toDoPage.editedElement,contact_id:e.auth.userData.id}}),{EditToDoPointThunk:je})((function(e){return Object(i.jsx)(Me,{onSubmit:function(t){e.EditToDoPointThunk(t,t.contact_id=e.contact_id,t.id=e.editElement.id)}})})),Je=n(100),Ke=n.n(Je),Ye=function(e){return Object(i.jsxs)("div",{className:Ke.a.contentWrapper,children:[Object(i.jsx)(Fe,{className:Ke.a.EditToDoReduxFormContainer}),Object(i.jsx)(Ne,{className:Ke.a.ExistElementContainer})]})};var Ge=function(e){return Object(i.jsx)(h.a,{children:Object(i.jsxs)("div",{className:"app-wrapper",children:[Object(i.jsx)(_,{className:"header"}),Object(i.jsxs)("div",{className:"app-wrapper-content",children:[Object(i.jsx)(z.a,{path:"/profile",render:function(){return Object(i.jsx)(Te,{})}}),Object(i.jsx)(z.a,{path:"/login",render:function(){return Object(i.jsx)(Z,{})}}),Object(i.jsx)(z.a,{path:"/registrate",render:function(){return Object(i.jsx)(X,{})}}),Object(i.jsx)(z.a,{path:"/edit",render:function(){return Object(i.jsx)(Ye,{})}})]})]})})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,411)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),o(e),a(e)}))},Ue=n(18),Ze=n(188),ze=n(409),Qe=Object(Ue.c)({toDoPage:he,form:ze.a,auth:S}),Ve=Object(Ue.d)(Qe,Object(Ue.a)(Ze.a));window.store=Ve;var qe=Ve;r.a.render(Object(i.jsx)(b.a,{store:qe,children:Object(i.jsx)(Ge,{})}),document.getElementById("root")),He()},48:function(e,t,n){e.exports={form:"registration_form__GAbWe",fields:"registration_fields__3VMJ-"}},63:function(e,t,n){e.exports={contentWrapper:"mainpage_contentWrapper__2nnWs",input:"mainpage_input__Mr5Et",complete:"mainpage_complete__RPaZx",uncomplete:"mainpage_uncomplete__1ERY7",batchDelete:"mainpage_batchDelete__1m1Uf"}},72:function(e,t,n){e.exports={header:"header_header__26JZb",loginBlock:"header_loginBlock__1NpDD"}},73:function(e,t,n){e.exports={form:"login_form__2IFQP",fields:"login_fields__KwWPm"}}},[[370,1,2]]]);
//# sourceMappingURL=main.55ae7b83.chunk.js.map